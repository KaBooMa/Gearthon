<div class="p-4 d-flex flex-column gap-4">
    <div class="d-flex flex-column w-100" x-data="{ 'state': 'downloaded', 'update_available': null }">
        <template x-if="!update_available">
            <button class="btn btn-primary" x-on:click="async () => {update_available = null; update_available = await eel.check_for_update()()}">Check for Updates</button>
        </template>
        <template x-if="update_available == false">
            <p>
                No updates available
            </p>
        </template>
        <template x-if="update_available == true">
            <div class="d-flex flex-column w-100">
                <template x-if="state == 'downloading'">
                    <div class="progress w-100 mb-4" x-data="{'progress': 0}">
                        <div class="progress-bar" :style="{ width: progress + '%' }" x-init="
                            setInterval(async () => {
                                progress = await eel.get_progress('editor')(); 
                                if (progress >= 100) {
                                    state = 'downloaded'; 
                                }
                            }, 100);"></div>
                    </div>
                </template>
                <button class="btn btn-success" :class="{ 'disabled': state == 'downloading' }" x-on:click="async () => { state = 'downloading'; eel.update()(); }">Update Gearthon <i class="fa-solid fa-download"></i></button>
            </div>
        </template>
    </div>
    <div>
        <label class="form-label">Theme</label>
        <select class="form-select" x-model="appdata.theme" x-on:change="eel.update_appdata({'theme': $event.target.value})()">
            <option value="cerulean">Cerulean</option>
            <option value="cosmo">Cosmo</option>
            <option value="cyborg">Cyborg</option>
            <option value="darkly">Darkly</option>
            <option value="default">Default</option>
            <option value="flatly">Flatly</option>
            <option value="litera">Litera</option>
            <option value="lumen">Lumen</option>
            <option value="minty">Minty</option>
            <option value="pulse">Pulse</option>
            <option value="sandstone">Sandstone</option>
            <option value="simplex">Simplex</option>
            <option value="sketchy">Sketchy</option>
            <option value="solar">Solar</option>
            <option value="spacelab">Spacelab</option>
            <option value="superhero">Superhero</option>
            <option value="united">United</option>
            <option value="vapor">Vapor</option>
            <option value="yeti">Yeti</option>
            <option value="zephyr">Zephyr</option>
        </select>
    </div>

    <div>
        <label class="form-label">GearBlocks Path</label>
        <div class="d-flex">
            <input class="form-control" disabled :class="{'is-valid': appdata.gearblocks_path}" x-model="appdata.gearblocks_path">
            <button class="btn btn-primary ms-2" x-on:click="async () => { await eel.update_gearblocks_folder()(); appdata = await eel.get_appdata()(); }"><i class="fa-solid fa-upload"></i></button>
        </div>
    </div>
</div>